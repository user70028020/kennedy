import{f as b,a as i,c as W,t as Jt}from"../chunks/BVSBLeZ4.js";import{p as Kt,s as y,h as Mt,u as Pt,f as N,b as o,c as s,t as j,a as Qt,g as t,d,r as a,j as F,n as Vt,l as nt}from"../chunks/CyUuy-wj.js";import{d as Wt,s as m}from"../chunks/Ds7I-RoO.js";import{i as k}from"../chunks/B9KgWSyi.js";import{e as X,i as Y}from"../chunks/D5Lyc911.js";import{s as ct}from"../chunks/DwPpHslU.js";import{s as vt}from"../chunks/SJb4weSm.js";import{b as ut}from"../chunks/c2Jz6SHd.js";import{a as U}from"../chunks/CLPOYvp8.js";import{b as Xt}from"../chunks/DxC-crzK.js";import{s as Yt,f as Zt}from"../chunks/DdEIAL_0.js";var te=b('<button class="px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-all duration-200 flex items-center gap-2 hover:scale-105"><span>üóëÔ∏è</span> Esvaziar Lixeira</button>'),ee=b('<div class="bg-red-500/10 border border-red-500/30 rounded-lg p-4 text-red-400 animate-fade-in"> <button class="ml-2 underline">Fechar</button></div>'),re=b("<button> </button>"),ae=b('<div class="flex items-center justify-center py-12"><div class="w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"></div></div>'),oe=b('<div class="rounded-lg p-12 text-center border" style="background-color: var(--bg-card); border-color: var(--border-color);"><div class="text-6xl mb-4">üóëÔ∏è</div> <h3 class="text-xl font-medium text-theme-primary mb-2">Lixeira vazia</h3> <p class="text-theme-muted">Nenhum item exclu√≠do encontrado</p></div>'),se=b('<span class="mr-2"> </span>'),le=b('<tr class="transition-colors duration-200 hover:bg-theme-hover" style="opacity: 0;"><td class="px-4 py-3"><span class="inline-flex items-center gap-2 px-2 py-1 rounded text-sm" style="background-color: var(--bg-tertiary); color: var(--text-secondary);"> </span></td><td class="px-4 py-3 text-theme-primary font-medium"> </td><td class="px-4 py-3 text-theme-muted text-sm"><!></td><td class="px-4 py-3 text-theme-muted text-sm"> </td><td class="px-4 py-3 text-right"><div class="flex items-center justify-end gap-2"><button class="px-3 py-1.5 bg-green-600 hover:bg-green-700 disabled:opacity-50 text-white text-sm rounded-lg transition-all duration-200"> </button> <button class="px-3 py-1.5 bg-red-600 hover:bg-red-700 disabled:opacity-50 text-white text-sm rounded-lg transition-all duration-200"> </button></div></td></tr>'),de=b('<div class="rounded-lg overflow-hidden border" style="background-color: var(--bg-card); border-color: var(--border-color);"><table class="w-full"><thead style="background-color: var(--bg-tertiary);"><tr><th class="px-4 py-3 text-left text-sm font-medium text-theme-secondary">Tipo</th><th class="px-4 py-3 text-left text-sm font-medium text-theme-secondary">Nome</th><th class="px-4 py-3 text-left text-sm font-medium text-theme-secondary">Detalhes</th><th class="px-4 py-3 text-left text-sm font-medium text-theme-secondary">Exclu√≠do em</th><th class="px-4 py-3 text-right text-sm font-medium text-theme-secondary">A√ß√µes</th></tr></thead><tbody class="divide-y" style="border-color: var(--border-color);"></tbody></table></div>'),ie=b('<div class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 animate-fade-in"><div class="rounded-lg p-6 max-w-md w-full mx-4 animate-scale-in" style="background-color: var(--bg-card); border: 1px solid var(--border-color);"><h3 class="text-xl font-bold text-theme-primary mb-4">‚ö†Ô∏è Esvaziar Lixeira</h3> <p class="text-theme-secondary mb-6"> <strong class="text-red-400">Esta a√ß√£o n√£o pode ser desfeita.</strong></p> <div class="flex justify-end gap-3"><button class="px-4 py-2 rounded-lg" style="background-color: var(--bg-tertiary); color: var(--text-secondary);">Cancelar</button> <button class="px-4 py-2 bg-red-600 hover:bg-red-700 disabled:opacity-50 text-white rounded-lg"> </button></div></div></div>'),ne=b('<div class="space-y-6" style="opacity: 0;"><div class="flex items-center justify-between"><div><h1 class="text-2xl font-bold text-theme-primary">üóëÔ∏è Lixeira</h1> <p class="text-theme-muted mt-1">Itens exclu√≠dos podem ser restaurados ou removidos permanentemente</p></div> <!></div> <!> <div class="flex gap-2 flex-wrap"><button> </button> <!></div> <!></div> <!>',1);function he(pt,mt){Kt(mt,!0);let c=y(Mt([])),q=y(!0),_=y(null),I=y(null),L=y(null),C=y(!1),D=y(!1),g=y("all"),R,O=[];const Z={user:"Usu√°rio",service_order:"Ordem de Servi√ßo",report:"Relat√≥rio",template:"Template",colaborador:"Colaborador"},tt={user:"üë§",service_order:"üìã",report:"üìÑ",template:"üìù",colaborador:"üë∑"};let et=y(!1);Pt(()=>{Xt&&!t(et)&&(o(et,!0),R&&Zt(R,{duration:.4}),xt())});async function xt(){o(q,!0),o(_,null);try{o(c,await U.get("/admin/trash"),!0),setTimeout(()=>{O.length>0&&Yt(O.filter(Boolean),{duration:.2,stagger:.03})},100)}catch(e){o(_,e.message||"Erro ao carregar lixeira",!0)}finally{o(q,!1)}}async function bt(e){o(I,e.id,!0);try{await U.post("/admin/trash/restore",{id:e.id,type:e.type}),o(c,t(c).filter(r=>r.id!==e.id),!0)}catch(r){o(_,r.message||"Erro ao restaurar item",!0)}finally{o(I,null)}}async function ft(e){if(confirm(`Excluir permanentemente "${e.name}"? Esta a√ß√£o n√£o pode ser desfeita.`)){o(L,e.id,!0);try{await U.delete(`/admin/trash/${e.type}/${e.id}`),o(c,t(c).filter(r=>r.id!==e.id),!0)}catch(r){o(_,r.message||"Erro ao excluir item",!0)}finally{o(L,null)}}}async function yt(){o(C,!0);try{await U.delete("/admin/trash"),o(c,[],!0),o(D,!1)}catch(e){o(_,e.message||"Erro ao esvaziar lixeira",!0)}finally{o(C,!1)}}function _t(e){return new Date(e).toLocaleString("pt-BR")}const rt=F(()=>t(g)==="all"?t(c):t(c).filter(e=>e.type===t(g)));var at=ne(),S=N(at),G=s(S),gt=d(s(G),2);{var ht=e=>{var r=te();r.__click=()=>o(D,!0),i(e,r)};k(gt,e=>{t(c).length>0&&e(ht)})}a(G);var ot=d(G,2);{var kt=e=>{var r=ee(),x=s(r),n=d(x);n.__click=()=>o(_,null),a(r),j(()=>m(x,`${t(_)??""} `)),i(e,r)};k(ot,e=>{t(_)&&e(kt)})}var H=d(ot,2),w=s(H);w.__click=()=>o(g,"all");var wt=s(w);a(w);var Et=d(w,2);X(Et,17,()=>Object.entries(Z),Y,(e,r)=>{var x=F(()=>nt(t(r),2));let n=()=>t(x)[0],T=()=>t(x)[1];const v=F(()=>t(c).filter(h=>h.type===n()).length);var p=W(),f=N(p);{var E=h=>{var l=re();l.__click=()=>o(g,n(),!0);var J=s(l);a(l),j(()=>{ct(l,1,`px-3 py-1.5 rounded-lg text-sm transition-all duration-200 ${t(g)===n()?"bg-blue-600 text-white":""}`),vt(l,t(g)!==n()?"background-color: var(--bg-tertiary); color: var(--text-secondary);":""),m(J,`${tt[n()]??""} ${T()??""} (${t(v)??""})`)}),i(h,l)};k(f,h=>{t(v)>0&&h(E)})}i(e,p)}),a(H);var $t=d(H,2);{var jt=e=>{var r=ae();i(e,r)},Tt=e=>{var r=W(),x=N(r);{var n=v=>{var p=oe();i(v,p)},T=v=>{var p=de(),f=s(p),E=d(s(f));X(E,21,()=>t(rt),Y,(h,l,J)=>{var A=le(),K=s(A),st=s(K),Lt=s(st);a(st),a(K);var M=d(K),Ct=s(M,!0);a(M);var P=d(M),Dt=s(P);{var Rt=u=>{var $=W(),Nt=N($);X(Nt,17,()=>Object.entries(t(l).details),Y,(Ft,Ut)=>{var it=F(()=>nt(t(Ut),2));let qt=()=>t(it)[0],Gt=()=>t(it)[1];var V=se(),Ht=s(V);a(V),j(()=>m(Ht,`${qt()??""}: ${Gt()??""}`)),i(Ft,V)}),i(u,$)},Ot=u=>{var $=Jt("-");i(u,$)};k(Dt,u=>{t(l).details?u(Rt):u(Ot,!1)})}a(P);var Q=d(P),St=s(Q,!0);a(Q);var lt=d(Q),dt=s(lt),z=s(dt);z.__click=()=>bt(t(l));var At=s(z,!0);a(z);var B=d(z,2);B.__click=()=>ft(t(l));var Bt=s(B,!0);a(B),a(dt),a(lt),a(A),ut(A,(u,$)=>O[$]=u,u=>O?.[u],()=>[J]),j(u=>{m(Lt,`${tt[t(l).type]??""} ${Z[t(l).type]??""}`),m(Ct,t(l).name),m(St,u),z.disabled=t(I)===t(l).id,m(At,t(I)===t(l).id?"...":"‚Ü©Ô∏è Restaurar"),B.disabled=t(L)===t(l).id,m(Bt,t(L)===t(l).id?"...":"üóëÔ∏è Excluir")},[()=>_t(t(l).deletedAt)]),i(h,A)}),a(E),a(f),a(p),i(v,p)};k(x,v=>{t(rt).length===0?v(n):v(T,!1)},!0)}i(e,r)};k($t,e=>{t(q)?e(jt):e(Tt,!1)})}a(S),ut(S,e=>R=e,()=>R);var zt=d(S,2);{var It=e=>{var r=ie(),x=s(r),n=d(s(x),2),T=s(n);Vt(),a(n);var v=d(n,2),p=s(v);p.__click=()=>o(D,!1);var f=d(p,2);f.__click=yt;var E=s(f,!0);a(f),a(v),a(x),a(r),j(()=>{m(T,`Excluir permanentemente todos os ${t(c).length??""} itens? `),f.disabled=t(C),m(E,t(C)?"Excluindo...":"Sim, esvaziar")}),i(e,r)};k(zt,e=>{t(D)&&e(It)})}j(()=>{ct(w,1,`px-3 py-1.5 rounded-lg text-sm transition-all duration-200 ${t(g)==="all"?"bg-blue-600 text-white":""}`),vt(w,t(g)!=="all"?"background-color: var(--bg-tertiary); color: var(--text-secondary);":""),m(wt,`Todos (${t(c).length??""})`)}),i(pt,at),Qt()}Wt(["click"]);export{he as component};

import{f as _,a as h}from"../chunks/BVSBLeZ4.js";import{p as Ne,s as i,h as pe,c as t,d as o,t as ve,g as r,a as qe,b as a,n as j,r as l,k as Se}from"../chunks/CyUuy-wj.js";import{d as Ce,e as Oe,s as Re}from"../chunks/Ds7I-RoO.js";import{i as V}from"../chunks/B9KgWSyi.js";import{r as n}from"../chunks/BUYgxnM0.js";import{a as ce,b as p}from"../chunks/BZWVT1Ld.js";import{P as Te}from"../chunks/CMByNPU3.js";import{a as je}from"../chunks/DN5HFw78.js";var De=_('<div class="modern-alert modern-alert-error animate-in"><svg class="modern-alert-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span> </span></div>'),Ee=_('<div class="modern-alert modern-alert-success animate-in"><svg class="modern-alert-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span>Relatório gerado com sucesso! Download iniciado.</span></div>'),Le=_('<div class="loading-dots"><span></span> <span></span> <span></span></div> <span>Gerando Relatório...</span>',1),Me=_('<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg> <span>Gerar Relatório</span>',1),Ae=_('<div class="max-w-5xl mx-auto animate-in"><div class="modern-card"><div class="modern-card-header"><div class="modern-card-title"><div class="modern-card-title-icon"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"></path></svg></div> Relatório Fotográfico</div> <div class="text-sm" style="color: var(--text-muted);">Preencha os dados e adicione as fotos</div></div> <form class="space-y-6"><div class="form-group"><label class="modern-label">Template</label> <div class="radio-group"><label class="radio-label"><input type="radio" class="modern-radio"/> <span style="color: var(--text-primary);">NX Energy</span></label> <label class="radio-label"><input type="radio" class="modern-radio"/> <span style="color: var(--text-primary);">SERCAMP</span></label></div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-5"><div class="form-group"><label for="osNumber" class="modern-label modern-label-required">Número da OS</label> <input id="osNumber" type="text" required class="modern-input" placeholder="Ex: OS-2024-001"/></div> <div class="form-group"><label for="clientName" class="modern-label modern-label-required">Cliente</label> <input id="clientName" type="text" required class="modern-input" placeholder="Nome do cliente"/></div> <div class="form-group"><label for="location" class="modern-label">Local</label> <input id="location" type="text" class="modern-input" placeholder="Local da inspeção"/></div> <div class="form-group"><label for="equipmentType" class="modern-label">Equipamento</label> <input id="equipmentType" type="text" class="modern-input" placeholder="Tipo de equipamento"/></div> <div class="form-group"><label for="serialNumber" class="modern-label">Número de Série</label> <input id="serialNumber" type="text" class="modern-input" placeholder="Nº de série do equipamento"/></div> <div class="form-group"><label for="responsible" class="modern-label">Responsável</label> <input id="responsible" type="text" class="modern-input" placeholder="Nome do responsável"/></div> <div class="form-group"><label for="reportDate" class="modern-label">Data</label> <input id="reportDate" type="date" class="modern-input"/></div></div> <div class="form-group"><label for="observations" class="modern-label">Observações</label> <textarea id="observations" rows="4" class="modern-textarea" placeholder="Observações gerais sobre a inspeção..."></textarea></div> <div class="form-group"><label class="modern-label modern-label-required">Fotos</label> <!></div> <!> <!> <div class="flex flex-col sm:flex-row gap-3 pt-4"><button type="submit" class="btn-modern btn-modern-primary flex-1 py-3.5"><!></button> <button type="button" class="btn-modern btn-modern-secondary py-3.5 sm:w-auto"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg> <span>Limpar</span></button></div></form></div></div>');function Ve(me,ue){Ne(ue,!0);const $=[],be="http://localhost:3000/api";let v=i("nx_energy"),c=i(""),m=i(""),g=i(""),x=i(""),y=i(""),w=i(""),k=i(pe(new Date().toISOString().split("T")[0])),N=i(""),u=i(pe([])),b=i(!1),d=i(null),q=i(!1);async function fe(e){if(e.preventDefault(),a(d,null),a(q,!1),!r(c).trim()){a(d,"Número da OS é obrigatório");return}if(!r(m).trim()){a(d,"Nome do cliente é obrigatório");return}if(r(u).length===0){a(d,"Adicione pelo menos uma foto");return}a(b,!0);try{const s=await fetch(`${be}/reports/fotografico`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${je.token}`},body:JSON.stringify({template:r(v),osNumber:r(c),clientName:r(m),location:r(g),equipmentType:r(x),serialNumber:r(y),responsible:r(w),reportDate:r(k),observations:r(N),photos:r(u)})});if(!s.ok){const ke=await s.json();throw new Error(ke.message||"Erro ao gerar relatório")}const R=await s.blob(),T=window.URL.createObjectURL(R),f=document.createElement("a");f.href=T,f.download=`relatorio_fotografico_${r(c)}_${Date.now()}.docx`,document.body.appendChild(f),f.click(),window.URL.revokeObjectURL(T),document.body.removeChild(f),a(q,!0),setTimeout(()=>{J()},2e3)}catch(s){a(d,s instanceof Error?s.message:"Erro ao gerar relatório",!0)}finally{a(b,!1)}}function J(){a(v,"nx_energy"),a(c,""),a(m,""),a(g,""),a(x,""),a(y,""),a(w,""),a(k,new Date().toISOString().split("T")[0],!0),a(N,""),a(u,[],!0),a(q,!1),a(d,null)}var D=Ae(),X=t(D),E=o(t(X),2),L=t(E),K=o(t(L),2),M=t(K),S=t(M);n(S),S.value=S.__value="nx_energy",j(2),l(M);var Q=o(M,2),C=t(Q);n(C),C.value=C.__value="sercamp",j(2),l(Q),l(K),l(L);var A=o(L,2),P=t(A),W=o(t(P),2);n(W),l(P);var B=o(P,2),Y=o(t(B),2);n(Y),l(B);var z=o(B,2),Z=o(t(z),2);n(Z),l(z);var U=o(z,2),ee=o(t(U),2);n(ee),l(U);var H=o(U,2),ae=o(t(H),2);n(ae),l(H);var F=o(H,2),re=o(t(F),2);n(re),l(F);var oe=o(F,2),te=o(t(oe),2);n(te),l(oe),l(A);var I=o(A,2),le=o(t(I),2);Se(le),l(I);var G=o(I,2),he=o(t(G),2);Te(he,{maxPhotos:30,get photos(){return r(u)},set photos(e){a(u,e,!0)}}),l(G);var se=o(G,2);{var _e=e=>{var s=De(),R=o(t(s),2),T=t(R,!0);l(R),l(s),ve(()=>Re(T,r(d))),h(e,s)};V(se,e=>{r(d)&&e(_e)})}var ie=o(se,2);{var ge=e=>{var s=Ee();h(e,s)};V(ie,e=>{r(q)&&e(ge)})}var ne=o(ie,2),O=t(ne),xe=t(O);{var ye=e=>{var s=Le();j(2),h(e,s)},we=e=>{var s=Me();j(2),h(e,s)};V(xe,e=>{r(b)?e(ye):e(we,!1)})}l(O);var de=o(O,2);de.__click=J,l(ne),l(E),l(X),l(D),ve(()=>{O.disabled=r(b),de.disabled=r(b)}),Oe("submit",E,fe),ce($,[],S,()=>r(v),e=>a(v,e)),ce($,[],C,()=>r(v),e=>a(v,e)),p(W,()=>r(c),e=>a(c,e)),p(Y,()=>r(m),e=>a(m,e)),p(Z,()=>r(g),e=>a(g,e)),p(ee,()=>r(x),e=>a(x,e)),p(ae,()=>r(y),e=>a(y,e)),p(re,()=>r(w),e=>a(w,e)),p(te,()=>r(k),e=>a(k,e)),p(le,()=>r(N),e=>a(N,e)),h(me,D),qe()}Ce(["click"]);export{Ve as component};

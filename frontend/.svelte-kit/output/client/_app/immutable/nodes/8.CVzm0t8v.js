import{f as m,a as u,c as pt}from"../chunks/BVSBLeZ4.js";import{p as mt,s as x,h as he,u as ft,f as Ie,d as o,c as a,b as s,t as w,g as e,a as xt,r as t}from"../chunks/CyUuy-wj.js";import{d as _t,s as v,e as ht}from"../chunks/Ds7I-RoO.js";import{i as y}from"../chunks/B9KgWSyi.js";import{e as Re,i as Ve}from"../chunks/D5Lyc911.js";import{r as U}from"../chunks/BUYgxnM0.js";import{b as G}from"../chunks/BZWVT1Ld.js";import{b as yt}from"../chunks/axbQqOQH.js";import{b as ye}from"../chunks/c2Jz6SHd.js";import{a as oe}from"../chunks/CLPOYvp8.js";import{b as bt}from"../chunks/DxC-crzK.js";import{f as gt,s as wt,a as Pe}from"../chunks/DdEIAL_0.js";var kt=m('<div class="bg-red-500/20 border border-red-500 text-red-400 px-4 py-3 rounded-lg flex items-center gap-2"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> </div>'),Ct=m('<div class="flex items-center justify-center py-12"><div class="spinner"></div></div>'),Mt=m('<div class="empty-state"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg> <p>Nenhum colaborador encontrado</p></div>'),jt=m("<div> </div>"),Et=m('<div style="color: var(--text-muted);"> </div>'),Tt=m('<span style="color: var(--text-muted);">-</span>'),zt=m('<tr class="table-row" style="opacity: 0;"><td class="px-4 py-3"><div class="flex items-center gap-3"><div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center shadow-lg shadow-blue-600/25"><span class="text-white text-sm font-medium"> </span></div> <span class="font-medium" style="color: var(--text-primary);"> </span></div></td><td class="px-4 py-3" style="color: var(--text-secondary);"> </td><td class="px-4 py-3" style="color: var(--text-secondary);"> </td><td class="px-4 py-3 text-sm" style="color: var(--text-secondary);"><!> <!> <!></td><td class="px-4 py-3"><span class="badge badge-info"> </span></td><td class="px-4 py-3 text-sm" style="color: var(--text-muted);"> </td><td class="px-4 py-3 text-right"><div class="flex items-center justify-end gap-2"><button class="p-2 rounded-lg transition-all duration-200 hover:scale-110 text-gray-400 hover:text-blue-400" title="Editar"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button> <button class="p-2 rounded-lg transition-all duration-200 hover:scale-110 text-gray-400 hover:text-red-400" title="Excluir"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></td></tr>'),St=m('<div class="overflow-x-auto"><table class="w-full"><thead class="table-header"><tr><th class="px-4 py-3 text-left text-sm font-medium" style="color: var(--text-secondary);">Nome</th><th class="px-4 py-3 text-left text-sm font-medium" style="color: var(--text-secondary);">Documento</th><th class="px-4 py-3 text-left text-sm font-medium" style="color: var(--text-secondary);">Função</th><th class="px-4 py-3 text-left text-sm font-medium" style="color: var(--text-secondary);">Contato</th><th class="px-4 py-3 text-left text-sm font-medium" style="color: var(--text-secondary);">OS</th><th class="px-4 py-3 text-left text-sm font-medium" style="color: var(--text-secondary);">Cadastro</th><th class="px-4 py-3 text-right text-sm font-medium" style="color: var(--text-secondary);">Ações</th></tr></thead><tbody></tbody></table></div>'),Bt=m("<option> </option>"),Ht=m('<div class="bg-red-500/20 border border-red-500 text-red-400 px-4 py-3 rounded-lg text-sm"> </div>'),Dt=m('<div class="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"></div>'),At=m('<div class="fixed inset-0 modal-backdrop flex items-center justify-center z-50 p-4"><div class="rounded-lg w-full max-w-md card" style="opacity: 0;"><div class="flex items-center justify-between p-4" style="border-bottom: 1px solid var(--border-color);"><h2 class="text-xl font-semibold" style="color: var(--text-primary);"> </h2> <button class="transition-colors" style="color: var(--text-muted);" aria-label="Fechar"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <form class="p-4 space-y-4"><div><label for="nome" class="block text-sm font-medium mb-1" style="color: var(--text-muted);">Nome *</label> <input id="nome" type="text" required class="w-full px-3 py-2 rounded-lg input" placeholder="Nome completo"/></div> <div><label for="documento" class="block text-sm font-medium mb-1" style="color: var(--text-muted);">Documento (CPF/RG) *</label> <input id="documento" type="text" required class="w-full px-3 py-2 rounded-lg input" placeholder="000.000.000-00"/></div> <div><label for="funcao" class="block text-sm font-medium mb-1" style="color: var(--text-muted);">Função *</label> <select id="funcao" required class="w-full px-3 py-2 rounded-lg input"><option>Selecione...</option><!></select></div> <div><label for="email" class="block text-sm font-medium mb-1" style="color: var(--text-muted);">Email</label> <input id="email" type="email" class="w-full px-3 py-2 rounded-lg input" placeholder="email@exemplo.com"/></div> <div><label for="telefone" class="block text-sm font-medium mb-1" style="color: var(--text-muted);">Telefone</label> <input id="telefone" type="tel" class="w-full px-3 py-2 rounded-lg input" placeholder="(00) 00000-0000"/></div> <!> <div class="flex justify-end gap-3 pt-4" style="border-top: 1px solid var(--border-color);"><button type="button" class="px-4 py-2 rounded-lg btn-secondary">Cancelar</button> <button type="submit" class="px-4 py-2 rounded-lg btn-primary disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"><!> </button></div></form></div></div>'),Lt=m('<div class="space-y-6" style="opacity: 0;"><div class="flex items-center justify-between"><h1 class="text-2xl font-bold" style="color: var(--text-primary);">Colaboradores</h1> <button class="flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-all duration-200 shadow-lg shadow-blue-600/25 hover:scale-[1.02]"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg> Novo Colaborador</button></div> <div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div class="rounded-lg p-4 card"><div class="flex items-center gap-3"><div class="w-10 h-10 bg-blue-500/20 rounded-lg flex items-center justify-center"><svg class="w-5 h-5 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg></div> <div><p class="text-sm" style="color: var(--text-muted);">Total de Colaboradores</p> <p class="text-2xl font-bold" style="color: var(--text-primary);"> </p></div></div></div> <div class="rounded-lg p-4 card"><div class="flex items-center gap-3"><div class="w-10 h-10 bg-green-500/20 rounded-lg flex items-center justify-center"><svg class="w-5 h-5 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg></div> <div><p class="text-sm" style="color: var(--text-muted);">Total de OS Participadas</p> <p class="text-2xl font-bold" style="color: var(--text-primary);"> </p></div></div></div> <div class="rounded-lg p-4 card"><div class="flex items-center gap-3"><div class="w-10 h-10 bg-purple-500/20 rounded-lg flex items-center justify-center"><svg class="w-5 h-5 text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg></div> <div><p class="text-sm" style="color: var(--text-muted);">Média OS/Colaborador</p> <p class="text-2xl font-bold" style="color: var(--text-primary);"> </p></div></div></div></div> <div class="rounded-lg p-4 card"><div class="flex gap-4"><div class="flex-1"><input type="text" placeholder="Buscar por nome, documento, função ou email..." class="w-full px-3 py-2 rounded-lg input"/></div> <button class="px-4 py-2 rounded-lg btn-secondary">Limpar</button></div></div> <!> <div class="rounded-lg overflow-hidden table-container"><!></div></div> <!>',1);function Kt($e,Ue){mt(Ue,!0);let k=x(he([])),le=x(!0),_=x(""),J=x(!1),C=x(null),K=x(!1),F=x(""),c=x(he({nome:"",documento:"",funcao:"",email:"",telefone:""})),Q=x(void 0),W=he([]),z=x(void 0);const Ge=["Técnico Eletricista","Engenheiro Eletricista","Supervisor","Coordenador","Auxiliar Técnico","Motorista","Estagiário","Outros"];let be=x(!1);ft(()=>{bt&&!e(be)&&(s(be,!0),O(),e(Q)&&gt(e(Q),{duration:.4}))});async function O(){s(le,!0),s(_,"");try{const r=new URLSearchParams;e(F)&&r.append("search",e(F)),s(k,await oe.get(`/admin/colaboradores${r.toString()?`?${r}`:""}`),!0),setTimeout(()=>{W.length>0&&wt(W.filter(Boolean),{duration:.3,stagger:.05})},100)}catch(r){s(_,r instanceof Error?r.message:"Erro ao carregar colaboradores",!0)}finally{s(le,!1)}}function Je(){s(C,null),s(c,{nome:"",documento:"",funcao:"",email:"",telefone:""},!0),s(J,!0),setTimeout(()=>{e(z)&&Pe(e(z),{duration:.25})},10)}function Ke(r){s(C,r,!0),s(c,{nome:r.nome,documento:r.documento,funcao:r.funcao,email:r.email||"",telefone:r.telefone||""},!0),s(J,!0),setTimeout(()=>{e(z)&&Pe(e(z),{duration:.25})},10)}function se(){s(J,!1),s(C,null)}async function Qe(){s(K,!0),s(_,"");try{const r={...e(c),email:e(c).email||null,telefone:e(c).telefone||null};e(C)?await oe.put(`/admin/colaboradores/${e(C).id}`,r):await oe.post("/admin/colaboradores",r),se(),await O()}catch(r){s(_,r instanceof Error?r.message:"Erro ao salvar colaborador",!0)}finally{s(K,!1)}}async function We(r){if(confirm(`Tem certeza que deseja excluir ${r.nome}?`))try{await oe.delete(`/admin/colaboradores/${r.id}`),await O()}catch(i){s(_,i instanceof Error?i.message:"Erro ao excluir colaborador",!0)}}function Xe(r){return new Date(r).toLocaleDateString("pt-BR")}function ge(){return e(k).reduce((r,i)=>r+i.osCount,0)}let we;function Ye(){clearTimeout(we),we=setTimeout(()=>O(),300)}var ke=Lt(),X=Ie(ke),ie=a(X),Ze=o(a(ie),2);Ze.__click=Je,t(ie);var de=o(ie,2),ne=a(de),Ce=a(ne),Me=o(a(Ce),2),je=o(a(Me),2),et=a(je,!0);t(je),t(Me),t(Ce),t(ne);var ve=o(ne,2),Ee=a(ve),Te=o(a(Ee),2),ze=o(a(Te),2),tt=a(ze,!0);t(ze),t(Te),t(Ee),t(ve);var Se=o(ve,2),Be=a(Se),He=o(a(Be),2),De=o(a(He),2),at=a(De,!0);t(De),t(He),t(Be),t(Se),t(de);var ce=o(de,2),Ae=a(ce),ue=a(Ae),pe=a(ue);U(pe),pe.__input=Ye,t(ue);var rt=o(ue,2);rt.__click=()=>{s(F,""),O()},t(Ae),t(ce);var Le=o(ce,2);{var ot=r=>{var i=kt(),M=o(a(i));t(i),w(()=>v(M,` ${e(_)??""}`)),u(r,i)};y(Le,r=>{e(_)&&r(ot)})}var Ne=o(Le,2),lt=a(Ne);{var st=r=>{var i=Ct();u(r,i)},it=r=>{var i=pt(),M=Ie(i);{var q=b=>{var j=Mt();u(b,j)},I=b=>{var j=St(),S=a(j),B=o(a(S));Re(B,21,()=>e(k),Ve,(Y,d,Z)=>{var g=zt(),E=a(g),H=a(E),R=a(H),D=a(R),ee=a(D,!0);t(D),t(R);var A=o(R,2),te=a(A,!0);t(A),t(H),t(E);var L=o(E),me=a(L,!0);t(L);var N=o(L),ae=a(N,!0);t(N);var T=o(N),V=a(T);{var fe=n=>{var p=jt(),_e=a(p,!0);t(p),w(()=>v(_e,e(d).email)),u(n,p)};y(V,n=>{e(d).email&&n(fe)})}var re=o(V,2);{var l=n=>{var p=Et(),_e=a(p,!0);t(p),w(()=>v(_e,e(d).telefone)),u(n,p)};y(re,n=>{e(d).telefone&&n(l)})}var f=o(re,2);{var h=n=>{var p=Tt();u(n,p)};y(f,n=>{!e(d).email&&!e(d).telefone&&n(h)})}t(T);var P=o(T),$=a(P),vt=a($,!0);t($),t(P);var xe=o(P),ct=a(xe,!0);t(xe);var Fe=o(xe),Oe=a(Fe),qe=a(Oe);qe.__click=()=>Ke(e(d));var ut=o(qe,2);ut.__click=()=>We(e(d)),t(Oe),t(Fe),t(g),ye(g,(n,p)=>W[p]=n,n=>W?.[n],()=>[Z]),w((n,p)=>{v(ee,n),v(te,e(d).nome),v(me,e(d).documento),v(ae,e(d).funcao),v(vt,e(d).osCount),v(ct,p)},[()=>e(d).nome.charAt(0).toUpperCase(),()=>Xe(e(d).createdAt)]),u(Y,g)}),t(B),t(S),t(j),u(b,j)};y(M,b=>{e(k).length===0?b(q):b(I,!1)},!0)}u(r,i)};y(lt,r=>{e(le)?r(st):r(it,!1)})}t(Ne),t(X),ye(X,r=>s(Q,r),()=>e(Q));var dt=o(X,2);{var nt=r=>{var i=At(),M=a(i),q=a(M),I=a(q),b=a(I,!0);t(I);var j=o(I,2);j.__click=se,t(q);var S=o(q,2),B=a(S),Y=o(a(B),2);U(Y),t(B);var d=o(B,2),Z=o(a(d),2);U(Z),t(d);var g=o(d,2),E=o(a(g),2),H=a(E);H.value=H.__value="";var R=o(H);Re(R,17,()=>Ge,Ve,(l,f)=>{var h=Bt(),P=a(h,!0);t(h);var $={};w(()=>{v(P,e(f)),$!==($=e(f))&&(h.value=(h.__value=e(f))??"")}),u(l,h)}),t(E),t(g);var D=o(g,2),ee=o(a(D),2);U(ee),t(D);var A=o(D,2),te=o(a(A),2);U(te),t(A);var L=o(A,2);{var me=l=>{var f=Ht(),h=a(f,!0);t(f),w(()=>v(h,e(_))),u(l,f)};y(L,l=>{e(_)&&l(me)})}var N=o(L,2),ae=a(N);ae.__click=se;var T=o(ae,2),V=a(T);{var fe=l=>{var f=Dt();u(l,f)};y(V,l=>{e(K)&&l(fe)})}var re=o(V);t(T),t(N),t(S),t(M),ye(M,l=>s(z,l),()=>e(z)),t(i),w(()=>{v(b,e(C)?"Editar Colaborador":"Novo Colaborador"),T.disabled=e(K),v(re,` ${e(C)?"Salvar Alterações":"Criar Colaborador"}`)}),ht("submit",S,l=>{l.preventDefault(),Qe()}),G(Y,()=>e(c).nome,l=>e(c).nome=l),G(Z,()=>e(c).documento,l=>e(c).documento=l),yt(E,()=>e(c).funcao,l=>e(c).funcao=l),G(ee,()=>e(c).email,l=>e(c).email=l),G(te,()=>e(c).telefone,l=>e(c).telefone=l),u(r,i)};y(dt,r=>{e(J)&&r(nt)})}w((r,i)=>{v(et,e(k).length),v(tt,r),v(at,i)},[ge,()=>e(k).length>0?(ge()/e(k).length).toFixed(1):"0"]),G(pe,()=>e(F),r=>s(F,r)),u($e,ke),xt()}_t(["click","input"]);export{Kt as component};

import{a4 as H,e as Q,a5 as W,a6 as O,X as M,a7 as Z,a8 as $,g as V,F as y,a9 as j,aa as ee,ab as X,ac as k,ad as b,ae,af as re,ag as Y,o as fe,ah as m,ai as z,aj as ne,D as ie,T as le,ak as B,al as q,w as se,am as ue,an as oe,ao as te,ap as G,aq as J,ar as F,W as ve,as as de,at as ce,au as pe,av as he}from"./CyUuy-wj.js";function Te(a,i){return i}function ge(a,i,l){for(var d=[],g=i.length,u,s=i.length,c=0;c<g;c++){let _=i[c];J(_,()=>{if(u){if(u.pending.delete(_),u.done.add(_),u.pending.size===0){var o=a.outrogroups;L(q(u.done)),o.delete(u),o.size===0&&(a.outrogroups=null)}}else s-=1},!1)}if(s===0){var r=d.length===0&&l!==null;if(r){var t=l,f=t.parentNode;pe(f),f.append(t),a.items.clear()}L(i,!r)}else u={pending:new Set(i),done:new Set},(a.outrogroups??=new Set).add(u)}function L(a,i=!0){for(var l=0;l<a.length;l++)he(a[l],i)}var U;function Ae(a,i,l,d,g,u=null){var s=a,c=new Map,r=(i&W)!==0;if(r){var t=a;s=M?O(Z(t)):t.appendChild(H())}M&&$();var f=null,_=y(()=>{var n=l();return se(n)?n:n==null?[]:q(n)}),o,p=!0;function A(){e.fallback=f,_e(e,o,s,i,d),f!==null&&(o.length===0?(f.f&m)===0?G(f):(f.f^=m,R(f,null,s)):J(f,()=>{f=null}))}var I=Q(()=>{o=V(_);var n=o.length;let S=!1;if(M){var N=j(s)===ee;N!==(n===0)&&(s=X(),O(s),k(!1),S=!0)}for(var E=new Set,w=fe,D=ne(),h=0;h<n;h+=1){M&&b.nodeType===ae&&b.data===re&&(s=b,S=!0,k(!1));var C=o[h],x=d(C,h),v=p?null:c.get(x);v?(v.v&&Y(v.v,C),v.i&&Y(v.i,h),D&&w.skipped_effects.delete(v.e)):(v=Ee(c,p?s:U??=H(),C,x,h,g,i,l),p||(v.e.f|=m),c.set(x,v)),E.add(x)}if(n===0&&u&&!f&&(p?f=z(()=>u(s)):(f=z(()=>u(U??=H())),f.f|=m)),M&&n>0&&O(X()),!p)if(D){for(const[K,P]of c)E.has(K)||w.skipped_effects.add(P.e);w.oncommit(A),w.ondiscard(()=>{})}else A();S&&k(!0),V(_)}),e={effect:I,items:c,outrogroups:null,fallback:f};p=!1,M&&(s=b)}function _e(a,i,l,d,g){var u=(d&ce)!==0,s=i.length,c=a.items,r=a.effect.first,t,f=null,_,o=[],p=[],A,I,e,n;if(u)for(n=0;n<s;n+=1)A=i[n],I=g(A,n),e=c.get(I).e,(e.f&m)===0&&(e.nodes?.a?.measure(),(_??=new Set).add(e));for(n=0;n<s;n+=1){if(A=i[n],I=g(A,n),e=c.get(I).e,a.outrogroups!==null)for(const v of a.outrogroups)v.pending.delete(e),v.done.delete(e);if((e.f&m)!==0)if(e.f^=m,e===r)R(e,null,l);else{var S=f?f.next:r;e===a.effect.last&&(a.effect.last=e.prev),e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),T(a,f,e),T(a,e,S),R(e,S,l),f=e,o=[],p=[],r=f.next;continue}if((e.f&F)!==0&&(G(e),u&&(e.nodes?.a?.unfix(),(_??=new Set).delete(e))),e!==r){if(t!==void 0&&t.has(e)){if(o.length<p.length){var N=p[0],E;f=N.prev;var w=o[0],D=o[o.length-1];for(E=0;E<o.length;E+=1)R(o[E],N,l);for(E=0;E<p.length;E+=1)t.delete(p[E]);T(a,w.prev,D.next),T(a,f,w),T(a,D,N),r=N,f=D,n-=1,o=[],p=[]}else t.delete(e),R(e,r,l),T(a,e.prev,e.next),T(a,e,f===null?a.effect.first:f.next),T(a,f,e),f=e;continue}for(o=[],p=[];r!==null&&r!==e;)(t??=new Set).add(r),p.push(r),r=r.next;if(r===null)continue}(e.f&m)===0&&o.push(e),f=e,r=e.next}if(a.outrogroups!==null){for(const v of a.outrogroups)v.pending.size===0&&(L(q(v.done)),a.outrogroups?.delete(v));a.outrogroups.size===0&&(a.outrogroups=null)}if(r!==null||t!==void 0){var h=[];if(t!==void 0)for(e of t)(e.f&F)===0&&h.push(e);for(;r!==null;)(r.f&F)===0&&r!==a.fallback&&h.push(r),r=r.next;var C=h.length;if(C>0){var x=(d&W)!==0&&s===0?l:null;if(u){for(n=0;n<C;n+=1)h[n].nodes?.a?.measure();for(n=0;n<C;n+=1)h[n].nodes?.a?.fix()}ge(a,h,x)}}u&&ve(()=>{if(_!==void 0)for(e of _)e.nodes?.a?.apply()})}function Ee(a,i,l,d,g,u,s,c){var r=(s&ue)!==0?(s&oe)===0?le(l,!1,!1):B(l):null,t=(s&te)!==0?B(g):null;return ie&&r&&(r.trace=()=>{c()[t?.v??g]}),{v:r,i:t,e:z(()=>(u(i,r??l,t??g,c),()=>{a.delete(d)}))}}function R(a,i,l){if(a.nodes)for(var d=a.nodes.start,g=a.nodes.end,u=i&&(i.f&m)===0?i.nodes.start:l;d!==null;){var s=de(d);if(u.before(d),d===g)return;d=s}}function T(a,i,l){i===null?a.effect.first=l:i.next=l,l===null?a.effect.last=i:l.prev=i}export{Ae as e,Te as i};

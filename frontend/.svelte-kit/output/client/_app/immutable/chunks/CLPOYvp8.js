import{b as h}from"./DxC-crzK.js";const c="http://localhost:3000/api";function i(){return h?localStorage.getItem("token"):null}async function s(o,r={}){const t=i(),n={"Content-Type":"application/json",...r.headers};t&&(n.Authorization=`Bearer ${t}`);const e=await fetch(`${c}${o}`,{...r,headers:n});if(!e.ok){const a=await e.json().catch(()=>({error:"Erro desconhecido"}));throw new Error(a.error||"Erro na requisição")}return e.json()}const u={get:o=>s(o,{method:"GET"}),post:(o,r)=>s(o,{method:"POST",body:JSON.stringify(r)}),put:(o,r)=>s(o,{method:"PUT",body:JSON.stringify(r)}),delete:o=>s(o,{method:"DELETE"}),upload:async(o,r)=>{const t=i(),n={};t&&(n.Authorization=`Bearer ${t}`);const e=await fetch(`${c}${o}`,{method:"POST",headers:n,body:r});if(!e.ok){const a=await e.json().catch(()=>({error:"Erro desconhecido"}));throw new Error(a.error||"Erro no upload")}return e.json()}};export{u as a};

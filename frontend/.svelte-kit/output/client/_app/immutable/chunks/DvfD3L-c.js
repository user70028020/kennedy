import{f as C,a as k}from"./BVSBLeZ4.js";import{p as G,u as K,c as u,d as c,t as N,a as O,g as d,s as Q,r as f,b as y}from"./CyUuy-wj.js";import{d as Z,e as $,s as tt}from"./Ds7I-RoO.js";import{i as I}from"./B9KgWSyi.js";import{s as T}from"./BUYgxnM0.js";import{s as et}from"./SJb4weSm.js";import{b as ot}from"./c2Jz6SHd.js";import{p as v}from"./k3Q1lqoc.js";var at=C('<div class="absolute inset-0 flex items-center justify-center pointer-events-none"><span class="text-sm" style="color: var(--text-muted);">Assine aqui</span></div>'),st=C('<p class="text-xs flex items-center gap-1" style="color: var(--color-success);"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Assinatura capturada</p>'),rt=C('<div class="space-y-3"><span class="modern-label"> </span> <div class="relative"><canvas class="w-full rounded-xl cursor-crosshair touch-none"></canvas> <!></div> <div class="flex gap-3"><button type="button" class="btn-modern btn-modern-secondary"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg> Limpar</button> <button type="button" class="btn-modern btn-modern-success"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Confirmar</button></div> <!></div>');function ht(q,r){G(r,!0);let H=v(r,"label",3,"Assinatura"),h=v(r,"width",3,400),S=v(r,"height",3,200),i=v(r,"value",15,""),a,o=null,l=!1,m=0,p=0,n=Q(!1);K(()=>{a&&(o=a.getContext("2d"),o&&(o.strokeStyle="#ffffff",o.lineWidth=2,o.lineCap="round",o.lineJoin="round",i()&&J(i())))});function J(t){if(!o||!t)return;const e=new Image;e.onload=()=>{o.clearRect(0,0,a.width,a.height),o.drawImage(e,0,0),y(n,!0)},e.src=t}function D(t){const e=a.getBoundingClientRect(),R=a.width/e.width,X=a.height/e.height;if("touches"in t){const Y=t.touches[0];return{x:(Y.clientX-e.left)*R,y:(Y.clientY-e.top)*X}}else return{x:(t.clientX-e.left)*R,y:(t.clientY-e.top)*X}}function L(t){t.preventDefault(),l=!0;const e=D(t);m=e.x,p=e.y}function j(t){if(!l||!o)return;t.preventDefault();const e=D(t);o.beginPath(),o.moveTo(m,p),o.lineTo(e.x,e.y),o.stroke(),m=e.x,p=e.y,y(n,!0)}function g(){l&&d(n)&&(l=!1,A()),l=!1}function P(){o&&(o.clearRect(0,0,a.width,a.height),y(n,!1),i(""),r.onchange?.(""))}function A(){if(!a||!d(n))return;const t=a.toDataURL("image/png");i(t),r.onchange?.(t)}function U(){A()}var _=rt(),b=u(_),V=u(b,!0);f(b);var w=c(b,2),s=u(w);s.__mousedown=L,s.__mousemove=j,s.__mouseup=g,s.__touchstart=L,s.__touchmove=j,s.__touchend=g,ot(s,t=>a=t,()=>a);var W=c(s,2);{var z=t=>{var e=at();k(t,e)};I(W,t=>{d(n)||t(z)})}f(w);var x=c(w,2),B=u(x);B.__click=P;var M=c(B,2);M.__click=U,f(x);var E=c(x,2);{var F=t=>{var e=st();k(t,e)};I(E,t=>{i()&&t(F)})}f(_),N(()=>{tt(V,H()),T(s,"width",h()),T(s,"height",S()),et(s,`max-width: ${h()??""}px; aspect-ratio: ${h()??""}/${S()??""}; background-color: var(--bg-tertiary); border: 2px solid var(--border-color);`),M.disabled=!d(n)}),$("mouseleave",s,g),k(q,_),O()}Z(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","click"]);export{ht as S};

{
  "version": 3,
  "sources": ["../../../../node_modules/.bun/svelte@5.46.3/node_modules/svelte/src/legacy/legacy-server.js"],
  "sourcesContent": ["/** @import { SvelteComponent } from '../index.js' */\n/** @import { Csp } from '#server' */\nimport { asClassComponent as as_class_component, createClassComponent } from './legacy-client.js';\nimport { render } from '../internal/server/index.js';\nimport { async_mode_flag } from '../internal/flags/index.js';\n\n// By having this as a separate entry point for server environments, we save the client bundle from having to include the server runtime\n\nexport { createClassComponent };\n\n/** @typedef {{ head: string, html: string, css: { code: string, map: null }; hashes?: { script: `sha256-${string}`[] } }} LegacyRenderResult */\n\n/**\n * Takes a Svelte 5 component and returns a Svelte 4 compatible component constructor.\n *\n * @deprecated Use this only as a temporary solution to migrate your imperative component code to Svelte 5.\n *\n * @template {Record<string, any>} Props\n * @template {Record<string, any>} Exports\n * @template {Record<string, any>} Events\n * @template {Record<string, any>} Slots\n *\n * @param {SvelteComponent<Props, Events, Slots>} component\n * @returns {typeof SvelteComponent<Props, Events, Slots> & Exports}\n */\nexport function asClassComponent(component) {\n\tconst component_constructor = as_class_component(component);\n\t/** @type {(props?: {}, opts?: { $$slots?: {}; context?: Map<any, any>; csp?: Csp }) => LegacyRenderResult & PromiseLike<LegacyRenderResult> } */\n\tconst _render = (props, { context, csp } = {}) => {\n\t\t// @ts-expect-error the typings are off, but this will work if the component is compiled in SSR mode\n\t\tconst result = render(component, { props, context, csp });\n\n\t\tconst munged = Object.defineProperties(\n\t\t\t/** @type {LegacyRenderResult & PromiseLike<LegacyRenderResult>} */ ({}),\n\t\t\t{\n\t\t\t\tcss: {\n\t\t\t\t\tvalue: { code: '', map: null }\n\t\t\t\t},\n\t\t\t\thead: {\n\t\t\t\t\tget: () => result.head\n\t\t\t\t},\n\t\t\t\thtml: {\n\t\t\t\t\tget: () => result.body\n\t\t\t\t},\n\t\t\t\tthen: {\n\t\t\t\t\t/**\n\t\t\t\t\t * this is not type-safe, but honestly it's the best I can do right now, and it's a straightforward function.\n\t\t\t\t\t *\n\t\t\t\t\t * @template TResult1\n\t\t\t\t\t * @template [TResult2=never]\n\t\t\t\t\t * @param { (value: LegacyRenderResult) => TResult1 } onfulfilled\n\t\t\t\t\t * @param { (reason: unknown) => TResult2 } onrejected\n\t\t\t\t\t */\n\t\t\t\t\tvalue: (onfulfilled, onrejected) => {\n\t\t\t\t\t\tif (!async_mode_flag) {\n\t\t\t\t\t\t\tconst user_result = onfulfilled({\n\t\t\t\t\t\t\t\tcss: munged.css,\n\t\t\t\t\t\t\t\thead: munged.head,\n\t\t\t\t\t\t\t\thtml: munged.html\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn Promise.resolve(user_result);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn result.then((result) => {\n\t\t\t\t\t\t\treturn onfulfilled({\n\t\t\t\t\t\t\t\tcss: munged.css,\n\t\t\t\t\t\t\t\thead: result.head,\n\t\t\t\t\t\t\t\thtml: result.body,\n\t\t\t\t\t\t\t\thashes: result.hashes\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}, onrejected);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\treturn munged;\n\t};\n\n\t// @ts-expect-error this is present for SSR\n\tcomponent_constructor.render = _render;\n\n\t// @ts-ignore\n\treturn component_constructor;\n}\n\n/**\n * Runs the given function once immediately on the server, and works like `$effect.pre` on the client.\n *\n * @deprecated Use this only as a temporary solution to migrate your component code to Svelte 5.\n * @param {() => void | (() => void)} fn\n * @returns {void}\n */\nexport function run(fn) {\n\tfn();\n}\n\nconst noop = () => {};\n\n// event stuff, no need to worry about it for SSR but needs to be there or it will crash\nexport {\n\tnoop as handlers,\n\tnoop as createBubbler,\n\tnoop as once,\n\tnoop as preventDefault,\n\tnoop as self,\n\tnoop as stopImmediatePropagation,\n\tnoop as stopPropagation,\n\tnoop as trusted,\n\tnoop as passive,\n\tnoop as nonpassive\n};\n"],
  "mappings": ";;;;;;;;;;;;;;;AAyBO,SAASA,kBAAiB,WAAW;AAC3C,QAAM,wBAAwB,iBAAmB,SAAS;AAE1D,QAAM,UAAU,CAAC,OAAO,EAAE,SAAS,IAAI,IAAI,CAAC,MAAM;AAEjD,UAAM,SAAS,OAAO,WAAW,EAAE,OAAO,SAAS,IAAI,CAAC;AAExD,UAAM,SAAS,OAAO;AAAA;AAAA,MACgD,CAAC;AAAA,MACtE;AAAA,QACC,KAAK;AAAA,UACJ,OAAO,EAAE,MAAM,IAAI,KAAK,KAAK;AAAA,QAC9B;AAAA,QACA,MAAM;AAAA,UACL,KAAK,MAAM,OAAO;AAAA,QACnB;AAAA,QACA,MAAM;AAAA,UACL,KAAK,MAAM,OAAO;AAAA,QACnB;AAAA,QACA,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UASL,OAAO,CAAC,aAAa,eAAe;AACnC,gBAAI,CAAC,iBAAiB;AACrB,oBAAM,cAAc,YAAY;AAAA,gBAC/B,KAAK,OAAO;AAAA,gBACZ,MAAM,OAAO;AAAA,gBACb,MAAM,OAAO;AAAA,cACd,CAAC;AACD,qBAAO,QAAQ,QAAQ,WAAW;AAAA,YACnC;AAEA,mBAAO,OAAO,KAAK,CAACC,YAAW;AAC9B,qBAAO,YAAY;AAAA,gBAClB,KAAK,OAAO;AAAA,gBACZ,MAAMA,QAAO;AAAA,gBACb,MAAMA,QAAO;AAAA,gBACb,QAAQA,QAAO;AAAA,cAChB,CAAC;AAAA,YACF,GAAG,UAAU;AAAA,UACd;AAAA,QACD;AAAA,MACD;AAAA,IACD;AAEA,WAAO;AAAA,EACR;AAGA,wBAAsB,SAAS;AAG/B,SAAO;AACR;AASO,SAAS,IAAI,IAAI;AACvB,KAAG;AACJ;AAEA,IAAM,OAAO,MAAM;AAAC;",
  "names": ["asClassComponent", "result"]
}
